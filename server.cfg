endpoint_add_tcp "5.249.165.251:30100" 
endpoint_add_udp "5.249.165.251:30100" 
set sv_listingIPOverride "5.249.165.251" 
## You CAN edit the following:
sv_maxclients 8
set steam_webApiKey "none"
sets tags "default, deployer, qbox"

## You MAY edit the following:
sv_licenseKey "cfxk_2aUCewv1bB73yaMSQkfW_RlJmq"
sv_hostname "Life$tyle RolePlay"
sets sv_projectName "Life$tyle RolePlay"
sets sv_projectDesc "A city with serious RP"
sets locale "en-US" # replace with your language and location code, like en-US, pt-BR, etc
set mysql_connection_string "mysql://zap1339023-1:V5ozTPOJPGpFNCAO@mysql-mariadb-28-104-asx.zap-srv.com/zap1339023-1?charset=utf8mb4"

# loadscreen config
# --- CUSTOM LOADSCREEN ---
ensure bd_loadingscreen


# Chat config
set resources_useSystemChat true
set chat_showJoins true
set chat_showQuits true

# Voice config
exec voice.cfg

# Qbox config
setr qb_locale "en"
setr qbx:enableBridge "true" # When true, enables the qb-core bridge for qbx_core
set qbx:enableQueue "true" # When true, enables qbx_core's built-in queue system
set qbx:bucketLockdownMode "inactive" # Sets the lockdown mode as inactive read here: https://docs.fivem.net/natives/?_0xA0F2201F
set qbx:discordLink "discord.gg/qbox" # Sets the servers discord link
set qbx:max_jobs_per_player 1 # Sets the number of jobs per player
set qbx:max_gangs_per_player 1 # Sets the number of gangs per player
set qbx:setjob_replaces "true" # When true, the SetJob function deletes the previous primary job of the player before setting the new one
set qbx:setgang_replaces "true" # When true, the SetGang function deletes the previous primary gang of the player before setting the new one
set qbx:cleanPlayerGroups "true" # When true, on server startup, the database will be checked for any groups/grades players have that are not in config files and removes them from the database if so
set qbx:allowMethodOverrides "true" # When true, enables the ability of resources to override existing methods in the player object
set qbx:disableOverrideWarning "false" # When true, disables warnings from resources overriding existing methods in the player object
setr qbx:enableVehiclePersistence "false" # When true, player vehicles marked for persistence will be respawned when deleted
setr qbx:vehiclePersistenceType "semi" # When "full", player vehicles will also be respawned after server restarts, when "semi", they will only respawn when deleted
set qbx:acknowledge "false" # When true, disables the default service message
setr qbx:enableGroupManagement "false" # When true, allows bosses to manage job/gang grades. Specifically the grade name.

# Message displayed to players in the chat after loading in
setr qbx:motd "<p style='padding: 1rem; background-color: rgb(30, 30, 30); border-radius: 1rem; text-align: center;'><span style='color: rgb(40, 200, 40);'>Welcome to Qbox!</span><br>Learn more at <span id='link' style='color: rgb(100, 100, 255);' onclick='window.invokeNative(\"openUrl\", \"https://docs.qbox.re/\")'>docs.qbox.re</span></p><style>span#link:hover { cursor: pointer; }</style>"

# illenium-appearance locale config
setr illenium-appearance:locale "en"

# Renewed-Weathersync config
setr weather_disablecd true

# Ox resources config
exec ox.cfg

# NPWD config
set npwd:framework "qbx"
# fill them in if you want extra phone functionality https://projecterror.dev/docs/npwd/start/installation#setting-up-camera-functionality
set SCREENSHOT_BASIC_TOKEN ""
set NPWD_AUDIO_TOKEN ""

# Allow mapforcer to start other resources
add_ace resource.mapforcer command.start allow
add_ace resource.mapforcer command.stop allow
add_ace resource.mapforcer command.restart allow

# ============================================
# RESOURCE LOAD ORDER
# ============================================
# Resources are loaded in dependency order to prevent startup failures.
# Load order: Core Dependencies → Framework → Libraries → Scripts
# 
# Key dependency chains:
# - ox_lib, oxmysql → qbx_core → bridges → scripts
# - qt-library → qt-crafting-v2
# - lc_utils → lc_stores
# - ps_lib → md-drugs
# - ox_lib, oxmysql → Most life/job/criminal scripts
# ============================================

# --- BASE GAME & CORE ---
stop basic-gamemode
ensure chat
ensure chat-theme-gtao
ensure lSpawnSelector
ensure sessionmanager
ensure hardcap
ensure baseevents
ensure mapforcer
ensure player-data
ensure playernames

# Load vanilla GTA map last
start map

# ============================================
# --- CORE DEPENDENCIES (Load First) ---
# ============================================
# These MUST load before anything that depends on them
# Many resources depend on ox_lib and oxmysql
ensure ox_lib
ensure oxmysql

# ============================================
# --- FRAMEWORK CORE ---
# ============================================
# qbx_core depends on ox_lib and oxmysql (see fxmanifest.lua dependencies)
ensure qbx_core

# ============================================
# --- OX RESOURCES ---
# ============================================
# Load after ox_lib (they may depend on it)
ensure ox_target
ensure ox_inventory
ensure ox_doorlock

# ============================================
# --- BRIDGES ---
# ============================================
# Must load after qbx_core (bridges connect to framework)
ensure [scripts]/[bridges]

# ============================================
# --- SHARED LIBRARIES ---
# ============================================
# Load libraries before scripts that depend on them
# qt-library: Used by qt-crafting-v2 and other scripts
ensure qt-library
# jpr-libs: Shared library for JPR resources
ensure jpr-libs
# lc_utils: Required by lc_stores (dependency declared in fxmanifest)
ensure lc_utils
# ps_lib: Required by md-drugs (dependency declared in fxmanifest)
ensure ps_lib

# ============================================
# --- QBX FRAMEWORK RESOURCES ---
# ============================================
# Load QBX resources after qbx_core
ensure [qbx]

# ============================================
# --- VOICE RESOURCES ---
# ============================================
ensure [voice]

# ============================================
# --- STREAMING RESOURCES (Load early) ---
# ============================================
# EUP resources - all loaded via [EUP] folder (includes eup-stream, ndrp_es_eup_v3, etc.)
ensure [eup]

# ============================================
# --- MAPS & MLOs ---
# ============================================
# Load after framework (some maps may depend on framework)
ensure mapmanager
ensure [maps]
ensure mc_grapeseed
ensure vortex_phonestore
ensure Mirror-Park-Clubhouse
ensure forest_mansion
ensure floresta
ensure brnx_tunnelhideout
ensure cityhall
ensure abs99_7sky
ensure grizmowe_hideout
ensure new_map
ensure Ricky-VinewoodSign
ensure patoche_free_cardealer
ensure bob74_ipl
ensure anarchy_Cardealer
ensure anarchy_MRPD
ensure anarchy_underground
# ensure anarchy_Unicorn  # Resource doesn't exist
ensure anarchy_LsCustoms
ensure vinewood_house
ensure dip_hookies
ensure dip_mechanic
ensure moreo_gym

# ============================================
# --- CUSTOM VEHICLES ---
# ============================================
ensure onx-evp-a-shared
ensure onx-evp-c-pack
ensure onx-evp-b-wheels
ensure [onx_vehicles]
ensure [cars]
ensure [carsounds]

# ============================================
# --- ADDITIONAL OX RESOURCES ---
# ============================================
ensure [ox]

# ============================================
# --- ASSETS ---
# ============================================
ensure [assets]
ensure screenshot-basic

# ============================================
# --- STANDALONE LIBRARIES & UTILITIES ---
# ============================================
# Load standalone resources that are libraries or have minimal dependencies
# These should load before scripts that might depend on them
# Note: Some standalone resources depend on ox_lib, oxmysql, qbx_core - they should be fine now
ensure [scripts]/[standalone]

# Explicitly ensure critical standalone resources with strict dependencies
# nu-blackmarket: Requires ox_target, ox_inventory, qbx_core (all loaded above)
ensure nu-blackmarket
# cdn-fuel: Requires PolyZone, interact-sound, qb-target, qb-input, qb-menu (in [qbx] folder)
ensure cdn-fuel
# qt-crafting-v2: Uses qt-library (loaded above)
ensure qt-crafting-v2
# lc_stores: Requires lc_utils (loaded above)
ensure lc_stores
# md-drugs: Requires ps_lib (loaded above)
ensure md-drugs

# ============================================
# --- STOP UNWANTED RESOURCES ---
# ============================================
# Stop RedM resources (not compatible with GTA5)
stop redm-map-one
stop sessionmanager-rdr3
# Stop test/example resources
stop ped-money-drops
stop money
stop money-fountain
stop money-fountain-example-map
stop example-loadscreen
# Stop build tools (shouldn't be resources)
stop yarn
stop webpack
stop qbx_hud

# ============================================
# --- LIFE SCRIPTS ---
# ============================================
# Load life scripts after core dependencies and libraries
# Many depend on ox_lib, oxmysql, and qbx_core
# Dependencies:
# - Renewed-Banking: Requires ox_lib, oxmysql
# - Renewed-Weathersync: Requires ox_lib
# - scully_emotemenu: Requires ox_lib
# - vehiclehandler: Requires ox_lib (see fxmanifest.lua dependencies)
ensure [scripts]/[life]
# Explicitly ensure critical resources that must load in order
# These are already in [life] folder but ensuring explicitly for load order control
ensure Renewed-Banking
ensure Renewed-Weathersync
ensure scully_emotemenu
ensure vehiclehandler

# ============================================
# --- JPR FRAMEWORK ADDONS ---
# ============================================
# ensure jpr-phonesystem  # Resource doesn't exist
ensure DLCiplLoader
ensure jpr-libsss

# ============================================
# --- JOB SCRIPTS ---
# ============================================
# Load after framework and life scripts (jobs may depend on them)
# Dependencies: Most job scripts require ox_lib, oxmysql, and qbx_core
# Examples: jim_mining, jim-recycle use oxmysql; savana-truckerjob uses ox_lib and oxmysql
ensure [scripts]/[jobs]

# ============================================
# --- CRIMINAL SCRIPTS ---
# ============================================
# Load after jobs and life scripts
# Dependencies: Most criminal scripts require ox_lib, oxmysql, and qbx_core
# Examples: HouseRobbery, pl-atmrob, lation_247robbery all use ox_lib
ensure [scripts]/[criminal]
# Explicitly ensure resources that aren't starting automatically from folder
# HouseRobbery: Depends on ox_lib and oxmysql (loaded above)
ensure HouseRobbery

# ============================================
# --- OTHER SCRIPTS ---
# ============================================
# Load remaining script categories
ensure [scripts]/[hunting]
ensure [scripts]/[vehicle]
ensure [scripts]/[casino]
ensure [scripts]/[admin]
ensure [scripts]/[government]


# Note: Housing and admin resources already loaded above

## Permissions ##
# Deployer Note: this admin master has no identifiers to be automatically added.
# add_principal identifier.discord:111111111111111111 group.admin #example
exec permissions.cfg
# --- Admin Permissions ---
add_ace identifier.license:e82401e87b175a2cabe05fcf33a100e7219a7496 command allow
add_principal identifier.license:e82401e87b175a2cabe05fcf33a100e7219a7496 group.admin

add_ace identifier.license:f276e341a9ec9c9c521d271ee9b98c2ec48dbc2d command allow
add_principal identifier.license:f276e341a9ec9c9c521d271ee9b98c2ec48dbc2d group.admin

add_ace identifier.license:f276e341a9ec9c9c521d271ee9b98c2ec48dbc2d command allow
add_principal identifier.license:f416f7bca2ff4cc8ff582babf66256d964a2a12f group.admin

add_ace identifier.license:fe84d79de20ee5467d6e4c046d2395f94e7ddc20 # TheMortician 
add_principal identifier.license:fe84d79de20ee5467d6e4c046d2395f94e7ddc20

add_principal identifier.discord:907787623681110047 qbcore.admin
add_principal identifier.discord:795494974182391838 qbcore.god
add_principal identifier.discord:51044733635959195 qbcore.admin
add_principal identifier.discord:691445103067267104 qbcore.admin
add_principal identifier.discord:1208038643994988565 qbcore.admin
add_principal identifier.discord:754189416662171768 qbcore.admin # TheMortician

add_ace group.admin command allow
add_ace group.admin admin allow
add_ace group.admin god allow  # Full access to qb-admin for all admins
add_ace resource.qbcore.god command allow
add_ace group.admin heist.admin allow
add_ace group.admin chrislocks.admin allow
add_ace group.admin command.heistbuilder allow
add_ace group.admin create allow # Creating Crafting tables (qt-crafting)
add_ace group.admin edit allow # Editing Crafting tables (qt-crafting)
## Miscellaneous ##
exec misc.cfg
add_principal identifier.discord:795494974182391838 group.mod
add_principal identifier.discord:1208038643994988565 group.mod
add_principal identifier.discord:691445103067267104 group.mod
add_principal identifier.discord:795494974182391838 command.heistbuilder
add_principal identifier.discord:795494974182391838 chrislocks.admin
add_principal identifier.steam:11000014569c44e group.admin # added by ZAP-Hosting for EasyAdmin
add_principal identifier.steam:11000014b150478 group.admin # added by ZAP-Hosting for EasyAdmin
